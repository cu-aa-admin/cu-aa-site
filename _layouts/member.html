---
layout: default
---
{% include csrf-protection.html %}

<!-- Protected member page layout -->
<script>
  // Check authentication on page load
  document.addEventListener('DOMContentLoaded', function() {
    if (window.netlifyIdentity) {
      netlifyIdentity.on('init', user => {
        if (!user) {
          // Not logged in - redirect to home with message
          sessionStorage.setItem('authRequired', 'Please log in to access member content');
          window.location.href = '/';
        } else {
          // User is authenticated - show content
          document.getElementById('memberContent').style.display = 'block';
          document.getElementById('loadingAuth').style.display = 'none';
        }
      });
    }
  });
</script>

<!-- Loading state -->
<div id="loadingAuth" style="text-align: center; padding: 4rem 2rem;">
  <div class="spinner" style="border: 4px solid #f3f3f3; border-top: 4px solid var(--columbia-blue); border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto 1rem;"></div>
  <p>Verifying authentication...</p>
</div>

<style>
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
</style>

<!-- Protected content (hidden until auth verified) -->
<div id="memberContent" style="display: none;">
  {{ content }}
</div>

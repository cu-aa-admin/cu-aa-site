---
layout: member
title: "Member Dashboard"
permalink: /members/dashboard/
---

<div class="dashboard-container">
  <!-- Loading State -->
  <div id="loadingState" class="loading-state">
    <div class="spinner"></div>
    <p>Loading your dashboard...</p>
  </div>

  <!-- Dashboard Content -->
  <div id="dashboardContent" style="display: none;">
    <div class="dashboard-header">
      <h1>Welcome back, <span id="memberName"></span>!</h1>
      <p class="member-info">
        <span id="memberSchool"></span> '<span id="memberYear"></span> ‚Ä¢ 
        <span id="memberRole" class="role-badge"></span>
      </p>
    </div>

    <!-- Quick Stats -->
    <div class="dashboard-stats">
      <div class="stat-card">
        <div class="stat-icon">üìä</div>
        <div class="stat-info">
          <h3 id="stat-posts">-</h3>
          <p>Posts Read</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üí¨</div>
        <div class="stat-info">
          <h3 id="stat-messages">-</h3>
          <p>Discord Messages</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">üåç</div>
        <div class="stat-info">
          <h3 id="stat-events">-</h3>
          <p>Events Attended</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ü§ù</div>
        <div class="stat-info">
          <h3 id="stat-connections">-</h3>
          <p>Connections Made</p>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
      <h2>Quick Actions</h2>
      <div class="action-grid">
        <a href="https://discord.gg/2h2HgWFJ" target="_blank" class="action-card discord">
          <div class="action-icon">üéÆ</div>
          <h3>Join Discord</h3>
          <p>Connect with alumni in real-time</p>
        </a>
        
        <a href="/contribute/" class="action-card contribute">
          <div class="action-icon">‚úçÔ∏è</div>
          <h3>Write Post</h3>
          <p>Share your insights with the community</p>
        </a>
        
        <a href="/members/directory/" class="action-card directory">
          <div class="action-icon">üë•</div>
          <h3>Alumni Directory</h3>
          <p>Find and connect with fellow alumni</p>
        </a>
        
        <a href="/members/events/" class="action-card events">
          <div class="action-icon">üìÖ</div>
          <h3>Upcoming Events</h3>
          <p>Register for workshops and meetups</p>
        </a>
        
        <a href="/members/mentorship/" class="action-card mentorship">
          <div class="action-icon">üéØ</div>
          <h3>Mentorship</h3>
          <p>Find mentors or become one</p>
        </a>
        
        <a href="/members/opportunities/" class="action-card opportunities">
          <div class="action-icon">üíº</div>
          <h3>Opportunities</h3>
          <p>Exclusive job postings and collaborations</p>
        </a>
      </div>
    </div>

    <!-- Recent Activity -->
    <div class="recent-activity">
      <h2>Recent Activity</h2>
      <div class="activity-feed">
        <div class="activity-item">
          <div class="activity-icon">üìù</div>
          <div class="activity-content">
            <p><strong>New post:</strong> "AI in African Healthcare" in Technology stream</p>
            <span class="activity-time">2 hours ago</span>
          </div>
        </div>
        
        <div class="activity-item">
          <div class="activity-icon">üí¨</div>
          <div class="activity-content">
            <p><strong>Sarah K.</strong> commented on "Economic Recovery Strategies"</p>
            <span class="activity-time">5 hours ago</span>
          </div>
        </div>
        
        <div class="activity-item">
          <div class="activity-icon">üéØ</div>
          <div class="activity-content">
            <p><strong>New mentorship match:</strong> Connected with Michael Chen (Finance)</p>
            <span class="activity-time">1 day ago</span>
          </div>
        </div>
        
        <div class="activity-item">
          <div class="activity-icon">üìÖ</div>
          <div class="activity-content">
            <p><strong>Event reminder:</strong> "Tech Innovation Summit" tomorrow at 7 PM EST</p>
            <span class="activity-time">1 day ago</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Your Contributions -->
    <div class="contributions">
      <h2>Your Contributions</h2>
      <div class="contribution-cards">
        <div class="contribution-card">
          <h3>Blog Posts</h3>
          <p class="contribution-count">2 published</p>
          <div class="contribution-list">
            <p>‚Ä¢ "Fintech Growth in East Africa"</p>
            <p>‚Ä¢ "Climate Policy and Economic Impact"</p>
          </div>
          <a href="/contribute/" class="btn btn-sm">Write Another</a>
        </div>
        
        <div class="contribution-card">
          <h3>Discord Activity</h3>
          <p class="contribution-count">Active in 3 channels</p>
          <div class="contribution-list">
            <p>‚Ä¢ #economics: 15 messages</p>
            <p>‚Ä¢ #technology: 8 messages</p>
            <p>‚Ä¢ #general: 12 messages</p>
          </div>
          <a href="https://discord.gg/2h2HgWFJ" target="_blank" class="btn btn-sm">Join Discussion</a>
        </div>
        
        <div class="contribution-card">
          <h3>Mentorship</h3>
          <p class="contribution-count">Mentoring 2 members</p>
          <div class="contribution-list">
            <p>‚Ä¢ John D. (Recent graduate)</p>
            <p>‚Ä¢ Maria S. (Career transition)</p>
          </div>
          <a href="/members/mentorship/" class="btn btn-sm">View Details</a>
        </div>
      </div>
    </div>

    <!-- Admin Section (Only for admins) -->
    <div id="adminSection" style="display: none;">
      <div class="admin-panel">
        <h2>üîß Admin Panel</h2>
        <div class="admin-actions">
          <a href="/admin/" class="btn btn-admin">Content Management</a>
          <a href="/members/admin/users/" class="btn btn-admin">User Management</a>
          <a href="/members/admin/analytics/" class="btn btn-admin">Analytics</a>
          <a href="/members/admin/settings/" class="btn btn-admin">Site Settings</a>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.dashboard-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

.loading-state {
  text-align: center;
  padding: 4rem 2rem;
}

.spinner {
  width: 50px;
  height: 50px;
  margin: 0 auto 1rem;
  border: 4px solid #f3f3f3;
  border-top: 4px solid #2d5aa0;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.error-state {
  text-align: center;
  padding: 2rem;
  background: #fee;
  border-radius: 8px;
  color: #c33;
}

.dashboard-header {
  background: linear-gradient(135deg, #1a365d 0%, #2d5aa0 100%);
  color: white;
  padding: 2rem;
  border-radius: 12px;
  margin-bottom: 2rem;
}

.dashboard-header h1 {
  margin: 0 0 0.5rem 0;
  font-size: 2rem;
}

.member-info {
  opacity: 0.9;
  margin: 0;
}

.role-badge {
  background: rgba(255, 255, 255, 0.2);
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.875rem;
  font-weight: 600;
}

.dashboard-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1.5rem;
  margin-bottom: 3rem;
}

.stat-card {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  border: 1px solid #e2e8f0;
  display: flex;
  align-items: center;
  gap: 1rem;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.stat-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}

.stat-icon {
  font-size: 2rem;
}

.stat-info h3 {
  margin: 0;
  font-size: 1.5rem;
  color: #1a365d;
}

.stat-info p {
  margin: 0;
  color: #666;
  font-size: 0.875rem;
}

.quick-actions {
  margin-bottom: 3rem;
}

.quick-actions h2 {
  color: #1a365d;
  margin-bottom: 1.5rem;
}

.action-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
}

.action-card {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  border: 1px solid #e2e8f0;
  text-decoration: none;
  color: inherit;
  transition: all 0.2s ease;
  display: block;
}

.action-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
  text-decoration: none;
  color: inherit;
}

.action-icon {
  font-size: 2rem;
  margin-bottom: 1rem;
}

.action-card h3 {
  margin: 0 0 0.5rem 0;
  color: #1a365d;
}

.action-card p {
  margin: 0;
  color: #666;
  font-size: 0.875rem;
}

.discord { border-left: 4px solid #5865F2; }
.contribute { border-left: 4px solid #059669; }
.directory { border-left: 4px solid #7C3AED; }
.events { border-left: 4px solid #DC2626; }
.mentorship { border-left: 4px solid #D97706; }
.opportunities { border-left: 4px solid #0891B2; }

.recent-activity {
  margin-bottom: 3rem;
}

.recent-activity h2 {
  color: #1a365d;
  margin-bottom: 1.5rem;
}

.activity-feed {
  background: white;
  border-radius: 8px;
  border: 1px solid #e2e8f0;
  overflow: hidden;
}

.activity-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem 1.5rem;
  border-bottom: 1px solid #f1f5f9;
}

.activity-item:last-child {
  border-bottom: none;
}

.activity-icon {
  font-size: 1.25rem;
  width: 40px;
  height: 40px;
  background: #f8fafc;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.activity-content {
  flex: 1;
}

.activity-content p {
  margin: 0 0 0.25rem 0;
  color: #334155;
}

.activity-time {
  font-size: 0.75rem;
  color: #64748b;
}

.contributions h2 {
  color: #1a365d;
  margin-bottom: 1.5rem;
}

.contribution-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-bottom: 3rem;
}

.contribution-card {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  border: 1px solid #e2e8f0;
}

.contribution-card h3 {
  margin: 0 0 0.5rem 0;
  color: #1a365d;
}

.contribution-count {
  color: #059669;
  font-weight: 600;
  margin: 0 0 1rem 0;
}

.contribution-list {
  margin-bottom: 1rem;
}

.contribution-list p {
  margin: 0.25rem 0;
  color: #666;
  font-size: 0.875rem;
}

.admin-panel {
  background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%);
  color: white;
  padding: 2rem;
  border-radius: 12px;
  margin-top: 3rem;
}

.admin-panel h2 {
  margin: 0 0 1.5rem 0;
}

.admin-actions {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
}

.btn {
  display: inline-block;
  padding: 0.75rem 1.5rem;
  background: #2d5aa0;
  color: white;
  text-decoration: none;
  border-radius: 6px;
  font-weight: 600;
  transition: background-color 0.2s ease;
  border: none;
  cursor: pointer;
}

.btn:hover {
  background: #1a365d;
  text-decoration: none;
  color: white;
}

.btn-sm {
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
}

.btn-admin {
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.btn-admin:hover {
  background: rgba(255, 255, 255, 0.3);
}

@media (max-width: 768px) {
  .dashboard-container {
    padding: 1rem;
  }
  
  .dashboard-header {
    padding: 1.5rem;
  }
  
  .dashboard-header h1 {
    font-size: 1.5rem;
  }
  
  .action-grid {
    grid-template-columns: 1fr;
  }
  
  .admin-actions {
    flex-direction: column;
  }
}
</style>

<script>
// Dashboard initialization with Netlify Identity
(function() {
  const loadingEl = document.getElementById('loadingState');
  const contentEl = document.getElementById('dashboardContent');

  // Initialize on auth ready
  netlifyIdentity.on('init', user => {
    if (!user) {
      // Redirect handled by member.html layout
      return;
    }

    loadDashboard(user);
  });

  async function loadDashboard(user) {
    try {
      // Extract user info
      const metadata = user.user_metadata || {};
      const firstName = metadata.full_name?.split(' ')[0] || user.email.split('@')[0];
      const school = metadata.school || 'Columbia University';
      const gradYear = metadata.graduation_year || 'N/A';
      const roles = user.app_metadata?.roles || [];
      const role = roles.includes('admin') ? 'Admin' : 'Member';

      // Populate user info
      document.getElementById('memberName').textContent = firstName;
      document.getElementById('memberSchool').textContent = school;
      document.getElementById('memberYear').textContent = gradYear;
      document.getElementById('memberRole').textContent = role;

      // Style role badge
      const roleBadge = document.getElementById('memberRole');
      if (role === 'Admin') {
        roleBadge.style.background = 'rgba(220, 38, 38, 0.8)';
        document.getElementById('adminSection').style.display = 'block';
      } else {
        roleBadge.style.background = 'rgba(5, 150, 105, 0.8)';
      }

      // Fetch user stats from serverless function
      await loadUserStats(user);

      // Show content, hide loading
      loadingEl.style.display = 'none';
      contentEl.style.display = 'block';

    } catch (error) {
      console.error('Dashboard load error:', error);
      loadingEl.innerHTML = `
        <div class="error-state">
          <h3>‚ö†Ô∏è Error Loading Dashboard</h3>
          <p>Please try refreshing the page.</p>
        </div>
      `;
    }
  }

  async function loadUserStats(user) {
    try {
      const response = await fetch('/.netlify/functions/user-stats', {
        headers: {
          'Authorization': `Bearer ${user.token.access_token}`
        }
      });

      if (response.ok) {
        const stats = await response.json();

        // Update stat cards
        document.getElementById('stat-posts').textContent = stats.postsRead || 0;
        document.getElementById('stat-messages').textContent = stats.discordMessages || 0;
        document.getElementById('stat-events').textContent = stats.eventsAttended || 0;
        document.getElementById('stat-connections').textContent = stats.connections || 0;
      } else {
        // Use defaults on error
        setDefaultStats();
      }
    } catch (error) {
      console.warn('Could not load stats:', error);
      setDefaultStats();
    }
  }

  function setDefaultStats() {
    document.getElementById('stat-posts').textContent = '0';
    document.getElementById('stat-messages').textContent = '0';
    document.getElementById('stat-events').textContent = '0';
    document.getElementById('stat-connections').textContent = '0';
  }
})();
</script>